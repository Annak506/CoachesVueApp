{"remainingRequest":"/Users/annakleinloog/Documents/IT/GitHub/CoachesVueApp/node_modules/babel-loader/lib/index.js!/Users/annakleinloog/Documents/IT/GitHub/CoachesVueApp/node_modules/eslint-loader/index.js??ref--14-0!/Users/annakleinloog/Documents/IT/GitHub/CoachesVueApp/src/store/modules/auth/actions.js","dependencies":[{"path":"/Users/annakleinloog/Documents/IT/GitHub/CoachesVueApp/src/store/modules/auth/actions.js","mtime":1732784212571},{"path":"/Users/annakleinloog/Documents/IT/GitHub/CoachesVueApp/babel.config.js","mtime":1598433744000},{"path":"/Users/annakleinloog/Documents/IT/GitHub/CoachesVueApp/node_modules/cache-loader/dist/cjs.js","mtime":1731913129120},{"path":"/Users/annakleinloog/Documents/IT/GitHub/CoachesVueApp/node_modules/babel-loader/lib/index.js","mtime":1731913127826},{"path":"/Users/annakleinloog/Documents/IT/GitHub/CoachesVueApp/node_modules/eslint-loader/index.js","mtime":1731913018534}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgYXN5bmMgbG9naW4oY29udGV4dCwgcGF5bG9hZCkgewogICAgcmV0dXJuIGNvbnRleHQuZGlzcGF0Y2goJ2F1dGgnLCB7CiAgICAgIC4uLnBheWxvYWQsCiAgICAgIG1vZGU6ICdsb2dpbicKICAgIH0pOwogIH0sCiAgYXN5bmMgc2lnbnVwKGNvbnRleHQsIHBheWxvYWQpIHsKICAgIHJldHVybiBjb250ZXh0LmRpc3BhdGNoKCdhdXRoJywgewogICAgICAuLi5wYXlsb2FkLAogICAgICBtb2RlOiAnc2lnbnVwJwogICAgfSk7CiAgfSwKICBhc3luYyBhdXRoKGNvbnRleHQsIHBheWxvYWQpIHsKICAgIGNvbnN0IG1vZGUgPSBwYXlsb2FkLm1vZGU7CiAgICBsZXQgdXJsID0gYGh0dHBzOi8vaWRlbnRpdHl0b29sa2l0Lmdvb2dsZWFwaXMuY29tL3YxL2FjY291bnRzOnNpZ25JbldpdGhQYXNzd29yZD9rZXk9QUl6YVN5QWNYZ2JEek53N0NvZTNPejc3VVAzLXhQTUZoMFp1bGp3YDsKICAgIGlmIChtb2RlID09PSAnc2lnbnVwJykgewogICAgICB1cmwgPSAnaHR0cHM6Ly9pZGVudGl0eXRvb2xraXQuZ29vZ2xlYXBpcy5jb20vdjEvYWNjb3VudHM6c2lnblVwP2tleT1BSXphU3lBY1hnYkR6Tnc3Q29lM096NzdVUDMteFBNRmgwWnVsancnOwogICAgfQogICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHsKICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICBlbWFpbDogcGF5bG9hZC5lbWFpbCwKICAgICAgICBwYXNzd29yZDogcGF5bG9hZC5wYXNzd29yZCwKICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZQogICAgICB9KQogICAgfSk7CiAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7CiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7CiAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlRGF0YSk7CiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKHJlc3BvbnNlRGF0YS5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gYXV0aGVudGljYXRlLCBjaGVjayB5b3VyIGxvZ2luIGRhdGEuJyk7CiAgICAgIHRocm93IGVycm9yOwogICAgfQogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgcmVzcG9uc2VEYXRhLmlkVG9rZW4pOwogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJJZCcsIHJlc3BvbnNlRGF0YS5sb2NhbElkKTsKICAgIGNvbnRleHQuY29tbWl0KCdzZXRVc2VyJywgewogICAgICB0b2tlbjogcmVzcG9uc2VEYXRhLmlkVG9rZW4sCiAgICAgIHVzZXJJZDogcmVzcG9uc2VEYXRhLmxvY2FsSWQsCiAgICAgIHRva2VuRXhwaXJhdGlvbjogcmVzcG9uc2VEYXRhLmV4cGlyZXNJbgogICAgfSk7CiAgfSwKICB0cnlMb2dpbihjb250ZXh0KSB7CiAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwogICAgY29uc3QgdXNlcklkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpOwogICAgaWYgKHRva2VuICYmIHVzZXJJZCkgewogICAgICBjb250ZXh0LmNvbW1pdCgnc2V0VXNlcicsIHsKICAgICAgICB0b2tlbjogdG9rZW4sCiAgICAgICAgdXNlcklkOiB1c2VySWQsCiAgICAgICAgdG9rZW5FeHBpcmF0aW9uOiBudWxsCiAgICAgIH0pOwogICAgfQogIH0sCiAgbG9nb3V0KGNvbnRleHQpIHsKICAgIGNvbnRleHQuY29tbWl0KCdzZXRVc2VyJywgewogICAgICB0b2tlbjogbnVsbCwKICAgICAgdXNlcklkOiBudWxsLAogICAgICB0b2tlbkV4cGlyYXRpb246IG51bGwKICAgIH0pOwogIH0KfTs="},{"version":3,"names":["login","context","payload","dispatch","mode","signup","auth","url","response","fetch","method","body","JSON","stringify","email","password","returnSecureToken","responseData","json","ok","console","log","error","Error","message","localStorage","setItem","idToken","localId","commit","token","userId","tokenExpiration","expiresIn","tryLogin","getItem","logout"],"sources":["/Users/annakleinloog/Documents/IT/GitHub/CoachesVueApp/src/store/modules/auth/actions.js"],"sourcesContent":["export default{\n    async login(context, payload) {\n       return context.dispatch('auth', {\n            ...payload, \n            mode: 'login'\n        })\n\n    },\n    async signup(context, payload) {\n        return context.dispatch('auth', {\n            ...payload, \n            mode: 'signup'\n        })\n    },\n    async auth(context, payload){\n        const mode = payload.mode;\n        let url = `https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyAcXgbDzNw7Coe3Oz77UP3-xPMFh0Zuljw`\n        \n        if(mode === 'signup'){\n            url = 'https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyAcXgbDzNw7Coe3Oz77UP3-xPMFh0Zuljw'\n        }\n        \n        const response = await fetch(\n            url,\n            {\n                method: 'POST',\n                body: JSON.stringify({\n                    email: payload.email,\n                    password: payload.password,\n                    returnSecureToken: true\n                })\n            }\n        );\n\n        const responseData = await response.json();\n\n        if(!response.ok){\n            console.log(responseData);\n            const error = new Error(responseData.message || \n                'Failed to authenticate, check your login data.'\n            );\n            throw error;\n        }\n\n        localStorage.setItem('token', responseData.idToken);\n        localStorage.setItem('userId', responseData.localId);\n\n        context.commit('setUser', {\n            token: responseData.idToken,\n            userId: responseData.localId,\n            tokenExpiration: responseData.expiresIn\n        });\n    },\n    tryLogin(context){\n        const token = localStorage.getItem('token');\n        const userId = localStorage.getItem('userId');\n\n        if(token&&userId){\n            context.commit('setUser', {\n                token: token,\n                userId: userId,\n                tokenExpiration: null\n            });\n        }\n    },\n    logout(context){\n   context.commit('setUser',{\n    token: null,\n    userId: null,\n    tokenExpiration: null\n   })\n    }\n\n}"],"mappings":";AAAA,eAAc;EACV,MAAMA,KAAKA,CAACC,OAAO,EAAEC,OAAO,EAAE;IAC3B,OAAOD,OAAO,CAACE,QAAQ,CAAC,MAAM,EAAE;MAC3B,GAAGD,OAAO;MACVE,IAAI,EAAE;IACV,CAAC,CAAC;EAEN,CAAC;EACD,MAAMC,MAAMA,CAACJ,OAAO,EAAEC,OAAO,EAAE;IAC3B,OAAOD,OAAO,CAACE,QAAQ,CAAC,MAAM,EAAE;MAC5B,GAAGD,OAAO;MACVE,IAAI,EAAE;IACV,CAAC,CAAC;EACN,CAAC;EACD,MAAME,IAAIA,CAACL,OAAO,EAAEC,OAAO,EAAC;IACxB,MAAME,IAAI,GAAGF,OAAO,CAACE,IAAI;IACzB,IAAIG,GAAG,GAAG,mHAAmH;IAE7H,IAAGH,IAAI,KAAK,QAAQ,EAAC;MACjBG,GAAG,GAAG,uGAAuG;IACjH;IAEA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CACxBF,GAAG,EACH;MACIG,MAAM,EAAE,MAAM;MACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QACjBC,KAAK,EAAEZ,OAAO,CAACY,KAAK;QACpBC,QAAQ,EAAEb,OAAO,CAACa,QAAQ;QAC1BC,iBAAiB,EAAE;MACvB,CAAC;IACL,CACJ,CAAC;IAED,MAAMC,YAAY,GAAG,MAAMT,QAAQ,CAACU,IAAI,CAAC,CAAC;IAE1C,IAAG,CAACV,QAAQ,CAACW,EAAE,EAAC;MACZC,OAAO,CAACC,GAAG,CAACJ,YAAY,CAAC;MACzB,MAAMK,KAAK,GAAG,IAAIC,KAAK,CAACN,YAAY,CAACO,OAAO,IACxC,gDACJ,CAAC;MACD,MAAMF,KAAK;IACf;IAEAG,YAAY,CAACC,OAAO,CAAC,OAAO,EAAET,YAAY,CAACU,OAAO,CAAC;IACnDF,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAET,YAAY,CAACW,OAAO,CAAC;IAEpD3B,OAAO,CAAC4B,MAAM,CAAC,SAAS,EAAE;MACtBC,KAAK,EAAEb,YAAY,CAACU,OAAO;MAC3BI,MAAM,EAAEd,YAAY,CAACW,OAAO;MAC5BI,eAAe,EAAEf,YAAY,CAACgB;IAClC,CAAC,CAAC;EACN,CAAC;EACDC,QAAQA,CAACjC,OAAO,EAAC;IACb,MAAM6B,KAAK,GAAGL,YAAY,CAACU,OAAO,CAAC,OAAO,CAAC;IAC3C,MAAMJ,MAAM,GAAGN,YAAY,CAACU,OAAO,CAAC,QAAQ,CAAC;IAE7C,IAAGL,KAAK,IAAEC,MAAM,EAAC;MACb9B,OAAO,CAAC4B,MAAM,CAAC,SAAS,EAAE;QACtBC,KAAK,EAAEA,KAAK;QACZC,MAAM,EAAEA,MAAM;QACdC,eAAe,EAAE;MACrB,CAAC,CAAC;IACN;EACJ,CAAC;EACDI,MAAMA,CAACnC,OAAO,EAAC;IAChBA,OAAO,CAAC4B,MAAM,CAAC,SAAS,EAAC;MACxBC,KAAK,EAAE,IAAI;MACXC,MAAM,EAAE,IAAI;MACZC,eAAe,EAAE;IAClB,CAAC,CAAC;EACD;AAEJ,CAAC","ignoreList":[]}]}