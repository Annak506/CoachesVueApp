{"remainingRequest":"/Users/annakleinloog/Documents/IT/GitHub/CoachesVueApp/node_modules/babel-loader/lib/index.js!/Users/annakleinloog/Documents/IT/GitHub/CoachesVueApp/node_modules/eslint-loader/index.js??ref--14-0!/Users/annakleinloog/Documents/IT/GitHub/CoachesVueApp/src/store/modules/requests/actions.js","dependencies":[{"path":"/Users/annakleinloog/Documents/IT/GitHub/CoachesVueApp/src/store/modules/requests/actions.js","mtime":1732535553723},{"path":"/Users/annakleinloog/Documents/IT/GitHub/CoachesVueApp/babel.config.js","mtime":1598433744000},{"path":"/Users/annakleinloog/Documents/IT/GitHub/CoachesVueApp/node_modules/cache-loader/dist/cjs.js","mtime":1731913129120},{"path":"/Users/annakleinloog/Documents/IT/GitHub/CoachesVueApp/node_modules/babel-loader/lib/index.js","mtime":1731913127826},{"path":"/Users/annakleinloog/Documents/IT/GitHub/CoachesVueApp/node_modules/eslint-loader/index.js","mtime":1731913018534}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIGFzeW5jIGNvbnRhY3RDb2FjaChjb250ZXh0LCBwYXlsb2FkKSB7CiAgICBjb25zdCBuZXdSZXF1ZXN0ID0gewogICAgICB1c2VyRW1haWw6IHBheWxvYWQuZW1haWwsCiAgICAgIG1lc3NhZ2U6IHBheWxvYWQubWVzc2FnZQogICAgfTsKICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vdnVlLXByb2plY3QtZDllMzUtZGVmYXVsdC1ydGRiLmV1cm9wZS13ZXN0MS5maXJlYmFzZWRhdGFiYXNlLmFwcC9yZXF1ZXN0cy8ke3BheWxvYWQuY29hY2hJZH0uanNvbmAsIHsKICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG5ld1JlcXVlc3QpCiAgICB9KTsKICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKICAgIGlmICghcmVzcG9uc2Uub2spIHsKICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IocmVzcG9uc2VEYXRhLm1lc3NhZ2UgfHwgIkZhaWxlZCB0byBzZW5kIHJlcXVlc3QiKTsKICAgICAgdGhyb3cgZXJyb3I7CiAgICB9CiAgICBuZXdSZXF1ZXN0LmlkID0gcmVzcG9uc2VEYXRhLm5hbWU7CiAgICBuZXdSZXF1ZXN0LmNvYWNoSWQgPSBwYXlsb2FkLmNvYWNoSWQ7CiAgICBjb250ZXh0LmNvbW1pdCgnYWRkUmVxdWVzdCcsIG5ld1JlcXVlc3QpOwogIH0sCiAgYXN5bmMgZmV0Y2hSZXF1ZXN0cyhjb250ZXh0KSB7CiAgICBjb25zdCBjb2FjaElkID0gY29udGV4dC5yb290R2V0dGVycy51c2VySWQ7CiAgICBjb25zb2xlLmxvZygiY29hY2hJZCIsIGNvYWNoSWQpOwoKICAgIC8vIEF3YWl0IHRoZSBmZXRjaCBjYWxsCiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGBodHRwczovL3Z1ZS1wcm9qZWN0LWQ5ZTM1LWRlZmF1bHQtcnRkYi5ldXJvcGUtd2VzdDEuZmlyZWJhc2VkYXRhYmFzZS5hcHAvcmVxdWVzdHMvJHtjb2FjaElkfS5qc29uYCk7CgogICAgLy8gQ2hlY2sgaWYgdGhlIHJlc3BvbnNlIGlzIE9LIGJlZm9yZSBwYXJzaW5nIEpTT04KICAgIGlmICghcmVzcG9uc2Uub2spIHsKICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoIkZhaWxlZCB0byBmZXRjaCByZXF1ZXN0cyIpOwogICAgICB0aHJvdyBlcnJvcjsKICAgIH0KCiAgICAvLyBBd2FpdCBKU09OIHBhcnNpbmcgYWZ0ZXIgY29uZmlybWluZyB0aGUgcmVzcG9uc2UgaXMgT0sKICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKICAgIGNvbnNvbGUubG9nKCJyZXNwb25zZURhdGEiLCByZXNwb25zZURhdGEpOwogICAgY29uc3QgcmVxdWVzdHMgPSBbXTsKCiAgICAvLyBQb3B1bGF0ZSB0aGUgcmVxdWVzdHMgYXJyYXkgaWYgcmVzcG9uc2VEYXRhIGlzIG5vdCBudWxsCiAgICBmb3IgKGNvbnN0IGtleSBpbiByZXNwb25zZURhdGEpIHsKICAgICAgY29uc3QgcmVxdWVzdCA9IHsKICAgICAgICBpZDoga2V5LAogICAgICAgIHVzZXJFbWFpbDogcmVzcG9uc2VEYXRhW2tleV0udXNlckVtYWlsLAogICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlRGF0YVtrZXldLm1lc3NhZ2UKICAgICAgfTsKICAgICAgcmVxdWVzdHMucHVzaChyZXF1ZXN0KTsKICAgIH0KCiAgICAvLyBDb21taXQgdGhlIHJlcXVlc3RzIHRvIHRoZSBzdG9yZQogICAgY29udGV4dC5jb21taXQoJ3NldFJlcXVlc3RzJywgcmVxdWVzdHMpOwogIH0KfTs="},{"version":3,"names":["contactCoach","context","payload","newRequest","userEmail","email","message","response","fetch","coachId","method","body","JSON","stringify","responseData","json","ok","error","Error","id","name","commit","fetchRequests","rootGetters","userId","console","log","requests","key","request","push"],"sources":["/Users/annakleinloog/Documents/IT/GitHub/CoachesVueApp/src/store/modules/requests/actions.js"],"sourcesContent":["export default{\n    async contactCoach(context, payload){\n        const newRequest = {\n            userEmail: payload.email,\n            message: payload.message\n        };\n\n        const response = await fetch(`https://vue-project-d9e35-default-rtdb.europe-west1.firebasedatabase.app/requests/${payload.coachId}.json`, {\n            method: 'POST',\n            body: JSON.stringify(newRequest)\n        });\n\n        const responseData = await response.json();\n\n        if(!response.ok){\n            const error = new Error(responseData.message || \"Failed to send request\");\n            throw error;\n        }\n\n        newRequest.id = responseData.name;\n        newRequest.coachId = payload.coachId;\n\n        context.commit('addRequest', newRequest)\n    },\n   \n    async fetchRequests(context) {\n        const coachId = context.rootGetters.userId;\n        console.log(\"coachId\", coachId);\n    \n        // Await the fetch call\n        const response = await fetch(`https://vue-project-d9e35-default-rtdb.europe-west1.firebasedatabase.app/requests/${coachId}.json`);\n    \n        // Check if the response is OK before parsing JSON\n        if (!response.ok) {\n            const error = new Error(\"Failed to fetch requests\");\n            throw error;\n        }\n    \n        // Await JSON parsing after confirming the response is OK\n        const responseData = await response.json();\n        console.log(\"responseData\", responseData);\n    \n        const requests = [];\n    \n        // Populate the requests array if responseData is not null\n        for (const key in responseData) {\n            const request = {\n                id: key,\n                userEmail: responseData[key].userEmail,\n                message: responseData[key].message,\n            };\n            requests.push(request);\n        }\n    \n        // Commit the requests to the store\n        context.commit('setRequests', requests);\n    }}    "],"mappings":";;AAAA,eAAc;EACV,MAAMA,YAAYA,CAACC,OAAO,EAAEC,OAAO,EAAC;IAChC,MAAMC,UAAU,GAAG;MACfC,SAAS,EAAEF,OAAO,CAACG,KAAK;MACxBC,OAAO,EAAEJ,OAAO,CAACI;IACrB,CAAC;IAED,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,qFAAqFN,OAAO,CAACO,OAAO,OAAO,EAAE;MACtIC,MAAM,EAAE,MAAM;MACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACV,UAAU;IACnC,CAAC,CAAC;IAEF,MAAMW,YAAY,GAAG,MAAMP,QAAQ,CAACQ,IAAI,CAAC,CAAC;IAE1C,IAAG,CAACR,QAAQ,CAACS,EAAE,EAAC;MACZ,MAAMC,KAAK,GAAG,IAAIC,KAAK,CAACJ,YAAY,CAACR,OAAO,IAAI,wBAAwB,CAAC;MACzE,MAAMW,KAAK;IACf;IAEAd,UAAU,CAACgB,EAAE,GAAGL,YAAY,CAACM,IAAI;IACjCjB,UAAU,CAACM,OAAO,GAAGP,OAAO,CAACO,OAAO;IAEpCR,OAAO,CAACoB,MAAM,CAAC,YAAY,EAAElB,UAAU,CAAC;EAC5C,CAAC;EAED,MAAMmB,aAAaA,CAACrB,OAAO,EAAE;IACzB,MAAMQ,OAAO,GAAGR,OAAO,CAACsB,WAAW,CAACC,MAAM;IAC1CC,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEjB,OAAO,CAAC;;IAE/B;IACA,MAAMF,QAAQ,GAAG,MAAMC,KAAK,CAAC,qFAAqFC,OAAO,OAAO,CAAC;;IAEjI;IACA,IAAI,CAACF,QAAQ,CAACS,EAAE,EAAE;MACd,MAAMC,KAAK,GAAG,IAAIC,KAAK,CAAC,0BAA0B,CAAC;MACnD,MAAMD,KAAK;IACf;;IAEA;IACA,MAAMH,YAAY,GAAG,MAAMP,QAAQ,CAACQ,IAAI,CAAC,CAAC;IAC1CU,OAAO,CAACC,GAAG,CAAC,cAAc,EAAEZ,YAAY,CAAC;IAEzC,MAAMa,QAAQ,GAAG,EAAE;;IAEnB;IACA,KAAK,MAAMC,GAAG,IAAId,YAAY,EAAE;MAC5B,MAAMe,OAAO,GAAG;QACZV,EAAE,EAAES,GAAG;QACPxB,SAAS,EAAEU,YAAY,CAACc,GAAG,CAAC,CAACxB,SAAS;QACtCE,OAAO,EAAEQ,YAAY,CAACc,GAAG,CAAC,CAACtB;MAC/B,CAAC;MACDqB,QAAQ,CAACG,IAAI,CAACD,OAAO,CAAC;IAC1B;;IAEA;IACA5B,OAAO,CAACoB,MAAM,CAAC,aAAa,EAAEM,QAAQ,CAAC;EAC3C;AAAC,CAAC","ignoreList":[]}]}